<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xử Lý Nhiễu Ảnh</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="main-container">
        <div class="control-panel">
            <div class="controls-group">
                <select class="algorithm-select" id="algorithmSelect">
                    <option value="mean">Lọc trung bình (Mean Filter)</option>
                    <option value="median">Lọc trung vị (Median Filter)</option>
                    <option value="min">Lọc Min (Min Filter)</option>
                    <option value="max">Lọc Max (Max Filter)</option>
                    <option value="midpoint">Lọc MidPoint (MidPoint Filter)</option>
                    <option value="gaussian">Lọc Gaussian (Gaussian Filter)</option>
                    <option value="geometric">Lọc trung bình hình học (Geometric Mean)</option>
                    <option value="harmonic">Lọc trung bình Harmonic</option>
                    <option value="contraharmonic">Lọc phản điều hòa Contraharmonic </option>
                </select>
                
                <div id="kernelSizeControl" style="display: flex; align-items: center; gap: 1rem;">
                    <label for="kernelSize" style="font-weight: 600;">Kernel Size:</label>
                    <select class="algorithm-select" id="kernelSize" style="width: 120px;">
                        <option value="3">3x3</option>
                        <option value="5" selected>5x5</option>
                        <option value="7">7x7</option>
                        <option value="9">9x9</option>
                    </select>
                </div>

                <div id="sigmaControl" style="display: none; align-items: center; gap: 1rem;">
                    <label for="sigmaRange" style="font-weight: 600;">Sigma (Độ mờ):</label>
                    <input type="range" id="sigmaRange" min="0.5" max="5" step="0.1" value="2.0" style="width: 120px;">
                    <span id="sigmaValue">2.0</span>
                </div>
                
                <div id="qParameterContainer" style="display: none; align-items: center; gap: 1rem;">
                    <label for="qParameter" style="font-weight: 600; color: #4c1d95;">Q (Bậc lọc):</label>
                    <input type="number" id="qParameter" class="algorithm-select" 
                           style="width: 120px;" value="1.5" step="0.5" min="-2" max="2">
                    <small style="color: #64748b;">Q > 0: loại nhiễu tiêu | Q < 0: loại nhiễu muối</small>
                </div>
                
                <button class="filter-btn" id="filterBtn" disabled>
                    <i class="bi bi-magic"></i>
                    Áp dụng bộ lọc
                </button>
                
                <div class="processing-indicator" id="processingIndicator">
                    <div class="spinner"></div>
                    Đang xử lý ảnh...
                </div>
            </div>
        </div>

        <div class="image-section">
            <div class="image-card">
                <h3 class="card-title">
                    <i class="bi bi-upload"></i>
                    Ảnh gốc
                </h3>
                <div class="file-input-wrapper">
                    <input class="file-input" type="file" id="inputImage" accept="image/*">
                    <label class="file-input-label" for="inputImage">
                        <i class="bi bi-cloud-upload"></i>
                        Chọn ảnh để tải lên
                    </label>
                </div>
                <div class="image-display" id="originalImageContainer">
                    <div class="placeholder-text">
                        <i class="bi bi-image" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i>
                        Chưa có ảnh được chọn
                    </div>
                    <img id="originalImage" src="" alt="Ảnh gốc" style="display:none;">
                </div>
            </div>

            <div class="image-card">
                <h3 class="card-title">
                    <i class="bi bi-sparkles"></i>
                    Ảnh đã xử lý
                </h3>
                <div style="height: 57px; margin-bottom: 1rem;"></div>
                <div class="image-display" id="processedImageContainer">
                    <div class="placeholder-text">
                        <i class="bi bi-hourglass-split" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i>
                        Chờ xử lý ảnh
                    </div>
                    <img id="processedImage" src="" alt="Ảnh đã xử lý" style="display:none;">
                </div>
            </div>
        </div>
    </div>

    
    <script src="./src/meanFilter.js"></script>
    <script src="./src/medianFilter.js"></script>
    <script src="./src/maxFilter.js"></script>
    <script src="./src/minFilter.js"></script>
    <script src="./src/midPointFilter.js"></script>
    <script src="./src/gaussianFilter.js"></script>
    <script src="./src/geometricMeanFilter.js"></script>
    <script src="./src/harmonicMeanFilter.js"></script>
    <script src="./src/contraharmonicMeanFilter.js"></script>
    <script src="script.js"></script>
</body>
</html>